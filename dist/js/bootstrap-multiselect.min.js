!function(t,e){"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified("knockout")?define(["jquery","knockout"],e):e(t.jQuery,t.ko)}(this,(function(t,e){"use strict";void 0!==e&&e.bindingHandlers&&!e.bindingHandlers.multiselect&&(e.bindingHandlers.multiselect={after:["options","value","selectedOptions","enable","disable"],init:function(i,o,s,l,n){var p=t(i),a=e.toJS(o());if(p.multiselect(a),s.has("options")){var r=s.get("options");e.isObservable(r)&&e.computed({read:function(){r(),setTimeout((function(){var t=p.data("multiselect");t&&t.updateOriginalOptions(),p.multiselect("rebuild")}),1)},disposeWhenNodeIsRemoved:i})}if(s.has("value")){var c=s.get("value");e.isObservable(c)&&e.computed({read:function(){c(),setTimeout((function(){p.multiselect("refresh")}),1)},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0})}if(s.has("selectedOptions")){var d=s.get("selectedOptions");e.isObservable(d)&&e.computed({read:function(){d(),setTimeout((function(){p.multiselect("refresh")}),1)},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0})}var u=function(t){setTimeout((function(){t?p.multiselect("enable"):p.multiselect("disable")}))};if(s.has("enable")){var h=s.get("enable");e.isObservable(h)?e.computed({read:function(){u(h())},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0}):u(h)}if(s.has("disable")){var f=s.get("disable");e.isObservable(f)?e.computed({read:function(){u(!f())},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0}):u(!f)}e.utils.domNodeDisposal.addDisposeCallback(i,(function(){p.multiselect("destroy")}))},update:function(i,o,s,l,n){var p=t(i),a=e.toJS(o());p.multiselect("setOptions",a).multiselect("rebuild")}});function i(e,i){var o=this,s=o.$select=t(e);i=o.options=o.mergeOptions(t.extend({},i,s.data())),s.attr("data-placeholder")&&(i.nonSelectedText=s.data("placeholder")),o.originalOptions=s.clone()[0].options,o.query="",o.searchTimeout=null,o.lastToggledInput=null,o.multiselectId=o.generateUniqueId()+"_0",o.internalIdCount=0,i.multiple="multiple"===s.attr("multiple"),i.onChange=t.proxy(i.onChange,o),i.onSelectAll=t.proxy(i.onSelectAll,o),i.onDeselectAll=t.proxy(i.onDeselectAll,o),i.onDropdownShow=t.proxy(i.onDropdownShow,o),i.onDropdownHide=t.proxy(i.onDropdownHide,o),i.onDropdownShown=t.proxy(i.onDropdownShown,o),i.onDropdownHidden=t.proxy(i.onDropdownHidden,o),i.onInitialized=t.proxy(i.onInitialized,o),i.onFiltering=t.proxy(i.onFiltering,o),o.buildContainer(),o.buildButton(),o.buildDropdown(),o.buildReset(),o.buildSelectAll(),o.buildDropdownOptions(),o.buildFilter(),o.buildButtons(),o.updateButtonText(),o.updateSelectAll(!0),i.enableClickableOptGroups&&i.multiple&&o.updateOptGroups(),i.wasDisabled=s.prop("disabled"),i.disableIfEmpty&&t("option",s).length<=0&&!i.wasDisabled&&o.disable(!0),s.wrap('<span class="multiselect-native-select" />').after(o.$container),s.prop("tabindex","-1"),"never"!==i.widthSynchronizationMode&&o.synchronizeButtonAndPopupWidth(),s.data("multiselect",o),i.onInitialized(s,o.$container)}i.prototype={defaults:{buttonText:function(e,i){var o=this;if(o.disabledText.length>0&&i.prop("disabled"))o=o.disabledText;else if(0===e.length)o=o.nonSelectedText;else if(o.allSelectedText&&e.length===t("option",t(i)).length&&1!==t("option",t(i)).length&&o.multiple)o=o.selectAllNumber?o.allSelectedText+" ("+e.length+")":o.allSelectedText;else if(0!=o.numberDisplayed&&e.length>o.numberDisplayed)o=e.length+" "+o.nSelectedText;else{var s="",l=o.delimiterText;e.each((function(){var e=t(this),i=void 0!==e.attr("label")?e.attr("label"):e.text();o.noBrackets&&(i=i.replace(/\s*\(.*/,"")),s+=i+l})),o=s.substr(0,s.length-o.delimiterText.length)}return o},buttonTitle:function(e,i){if(0===e.length)return this.nonSelectedText;var o="",s=this.delimiterText;return e.each((function(){var e=void 0!==t(this).attr("label")?t(this).attr("label"):t(this).text();o+=e+s})),o.substr(0,o.length-this.delimiterText.length)},checkboxName:function(t){return!1},optionLabel:function(e){return t(e).attr("label")||t(e).text()},optionClass:function(e){return t(e).attr("class")||""},onChange:function(t,e){},onDropdownShow:function(t){},onDropdownHide:function(t){},onDropdownShown:function(t){},onDropdownHidden:function(t){},onSelectAll:function(t){},onDeselectAll:function(t){},onInitialized:function(t,e){},onFiltering:function(t){},enableHTML:!1,buttonClass:"custom-select",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,dropUp:!1,selectedClass:"active",maxHeight:null,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,selectAllJustVisible:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableFullValueFiltering:!1,enableClickableOptGroups:!1,enableCollapsibleOptGroups:!1,collapseOptGroupsByDefault:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",resetButtonText:"Reset",numberDisplayed:3,noBrackets:!1,disableIfEmpty:!1,disabledText:"",delimiterText:", ",includeResetOption:!1,includeResetDivider:!1,resetText:"Reset",indentGroupOptions:!0,widthSynchronizationMode:"never",buttonTextAlignment:"center",enableResetButton:!1,templates:{button:'<button type="button" class="form-select multiselect dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown"><span class="multiselect-selected-text"></span></button>',popupContainer:'<div class="multiselect-container dropdown-menu"></div>',filter:'<div class="multiselect-filter d-flex align-items-center"><i class="fas fa-sm fa-search text-muted"></i><input type="search" class="multiselect-search form-control" /></div>',buttonGroup:'<div class="multiselect-buttons btn-group" style="display:flex;"></div>',buttonGroupReset:'<button type="button" class="multiselect-reset btn btn-secondary btn-block"></button>',option:'<button type="button" class="multiselect-option dropdown-item"></button>',divider:'<div class="dropdown-divider"></div>',optionGroup:'<button type="button" class="multiselect-group dropdown-item"></button>',resetButton:'<div class="multiselect-reset text-center p-2"><button type="button" class="btn btn-sm btn-block btn-outline-secondary"></button></div>'}},constructor:i,buildContainer:function(){var e=this,i=e.$container=t(e.options.buttonContainer),o=e.options;"never"!==o.widthSynchronizationMode?i.on("show.bs.dropdown",t.proxy((function(){e.synchronizeButtonAndPopupWidth(),o.onDropdownShow()}),e)):i.on("show.bs.dropdown",o.onDropdownShow),i.on("hide.bs.dropdown",o.onDropdownHide).on("shown.bs.dropdown",o.onDropdownShown).on("hidden.bs.dropdown",o.onDropdownHidden)},buildButton:function(){var e=this;if(e.$button=t(e.options.templates.button).addClass(e.options.buttonClass),e.$select.attr("class")&&e.options.inheritClass&&e.$button.addClass(e.$select.attr("class")),e.$select.prop("disabled")?e.disable():e.enable(),e.options.buttonWidth&&"auto"!==e.options.buttonWidth&&(e.$button.css({width:"100%"}),e.$container.css({width:e.options.buttonWidth})),e.options.buttonTextAlignment)switch(e.options.buttonTextAlignment){case"left":e.$button.addClass("text-left");break;case"center":e.$button.addClass("text-center");break;case"right":e.$button.addClass("text-right")}var i=e.$select.attr("tabindex");i&&e.$button.attr("tabindex",i),e.$container.prepend(e.$button)},buildDropdown:function(){var e=this;e.$popupContainer=t(e.options.templates.popupContainer),e.options.dropRight?e.$container.addClass("dropright"):e.options.dropUp&&e.$container.addClass("dropup"),e.options.maxHeight&&e.$popupContainer.css({"max-height":e.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),"never"!==e.options.widthSynchronizationMode&&e.$popupContainer.css("overflow-x","hidden"),e.$popupContainer.on("touchstart click",(function(t){t.stopPropagation()})),e.$container.append(e.$popupContainer)},synchronizeButtonAndPopupWidth:function(){var t=this.$popupContainer;if(t&&"never"!==this.options.widthSynchronizationMode){var e=this.$button.outerWidth();switch(this.options.widthSynchronizationMode){case"always":t.css("min-width",e).css("max-width",e);break;case"ifPopupIsSmaller":t.css("min-width",e);break;case"ifPopupIsWider":t.css("max-width",e)}}},buildDropdownOptions:function(){var e=this;e.$select.children().each(t.proxy((function(i,o){var s=t(o),l=s.prop("tagName").toLowerCase();s.prop("value")!==e.options.selectAllValue&&("optgroup"===l?e.createOptgroup(o):"option"===l&&("divider"===s.data("role")?e.createDivider():e.createOptionValue(o,!1)))}),e));var i='> *:not(.multiselect-group) input[type="checkbox"], > *:not(.multiselect-group) input[type="radio"]';t(e.$popupContainer).off("change",i).on("change",i,t.proxy((function(i){var o=t(i.target),s=o.prop("checked")||!1,l=o.val()===e.options.selectAllValue;e.options.selectedClass&&o.closest(".multiselect-option").toggleClass(e.options.selectedClass,s);var n=o.attr("id"),p=e.getOptionById(n),a=t("option",e.$select).not(p),r=t("input",e.$container).not(o);if(l?s?e.selectAll(e.options.selectAllJustVisible,!0):e.deselectAll(e.options.selectAllJustVisible,!0):(s?(p.prop("selected",!0),e.options.multiple?p.prop("selected",!0):(e.options.selectedClass&&t(r).closest(".dropdown-item").removeClass(e.options.selectedClass),t(r).prop("checked",!1),a.prop("selected",!1),e.$button.trigger("click")),"active"===e.options.selectedClass&&a.closest(".dropdown-item").css("outline","")):p.prop("selected",!1),e.options.onChange(p,s),e.updateSelectAll(),e.options.enableClickableOptGroups&&e.options.multiple&&e.updateOptGroups()),e.$select.change(),e.updateButtonText(),e.options.preventInputChangeEvent)return!1}),e)),t(".multiselect-option",e.$popupContainer).off("mousedown").on("mousedown",(function(t){if(t.shiftKey)return!1}));i=".multiselect-option, .multiselect-all, .multiselect-group";if(t(e.$popupContainer).off("touchstart click",i).on("touchstart click",i,t.proxy((function(i){i.stopPropagation();var o=t(i.target);if(i.shiftKey&&e.options.multiple){o.is("input")||(i.preventDefault(),(o=o.closest(".multiselect-option").find("input")).prop("checked",!o.prop("checked")));var s=o.prop("checked")||!1;if(null!==e.lastToggledInput&&e.lastToggledInput!==o){var l=e.$popupContainer.find(".multiselect-option:visible").index(o.closest(".multiselect-option")),n=e.$popupContainer.find(".multiselect-option:visible").index(e.lastToggledInput.closest(".multiselect-option"));if(l>n){var p=n;n=l,l=p}++n;var a=e.$popupContainer.find(".multiselect-option:not(.multiselect-filter-hidden)").slice(l,n).find("input");a.prop("checked",s),e.options.selectedClass&&a.closest(".multiselect-option").toggleClass(e.options.selectedClass,s);for(var r=0,c=a.length;r<c;r++){var d=t(a[r]);e.getOptionById(d.attr("id")).prop("selected",s)}}o.trigger("change")}else if(!o.is("input")){if((d=o.closest(".multiselect-option, .multiselect-all").find(".form-check-input")).length>0)!e.options.multiple&&d.prop("checked")||(d.prop("checked",!d.prop("checked")),d.change());else if(e.options.enableClickableOptGroups&&e.options.multiple&&!o.hasClass("caret-container")){var u=o;u.hasClass("multiselect-group")||(u=o.closest(".multiselect-group")),(d=u.find(".form-check-input")).length>0&&(d.prop("checked",!d.prop("checked")),d.change())}i.preventDefault()}o.closest(".multiselect-option").find("input[type='checkbox'], input[type='radio']").length>0?e.lastToggledInput=o:e.lastToggledInput=null,o.blur()}),e)),e.$container.off("keydown.multiselect").on("keydown.multiselect",t.proxy((function(i){var o=t(e.$container).find(".multiselect-option:not(.disabled), .multiselect-group:not(.disabled), .multiselect-all").filter(":visible"),s=o.index(o.filter(":focus")),l=t(".multiselect-search",e.$container);if(9===i.keyCode&&e.$container.hasClass("show"))e.$button.trigger("click");else if(13==i.keyCode){var n=o.eq(s);setTimeout((function(){n.focus()}),1)}else if(38==i.keyCode)0!=s||l.is(":focus")||setTimeout((function(){l.focus()}),1);else if(40==i.keyCode)if(l.is(":focus")){var p=o.eq(0);setTimeout((function(){l.blur(),p.focus()}),1)}else-1==s&&setTimeout((function(){l.focus()}),1)}),e)),e.options.enableClickableOptGroups&&e.options.multiple&&t(".multiselect-group input",e.$popupContainer).off("change").on("change",t.proxy((function(i){i.stopPropagation();var o=t(i.target).prop("checked")||!1,s=t(i.target).closest(".dropdown-item"),l=s.nextUntil(".multiselect-group").not(".multiselect-filter-hidden").not(".disabled").find("input"),n=[];e.options.selectedClass&&s.toggleClass(e.options.selectedClass,o),t.each(l,t.proxy((function(i,s){var l=t(s),p=l.attr("id"),a=e.getOptionById(p);l.prop("checked",o).closest(".dropdown-item").toggleClass(e.options.selectedClass,o),a.prop("selected",o),n.push(a)}),e)),e.options.onChange(n,o),e.$select.change(),e.updateButtonText(),e.updateSelectAll()}),e)),e.options.enableCollapsibleOptGroups){let i=e.options.enableClickableOptGroups?".multiselect-group .caret-container":".multiselect-group";t(i,e.$popupContainer).off("click").on("click",t.proxy((function(i){var o=t(i.target).closest(".multiselect-group"),s=o.nextUntil(".multiselect-group").not(".multiselect-filter-hidden"),l=!0;s.each((function(){l=l&&!t(e).hasClass("multiselect-collapsible-hidden")})),l?(s.hide().addClass("multiselect-collapsible-hidden"),o.get(0).classList.add("closed")):(s.show().removeClass("multiselect-collapsible-hidden"),o.get(0).classList.remove("closed"))}),e))}},createCheckbox:function(e,i,o,s,l,n,p){var a=t("<span />");a.addClass("form-check");var r=t('<label class="form-check-label" />');this.options.enableHTML&&t(i).length>0?r.html(i):r.text(i),a.append(r);var c=t('<input class="form-check-input"/>').attr("type",n);return c.val(s),a.prepend(c),p&&(c.attr("id",p),r.attr("for",p)),o&&c.attr("name",o),e.prepend(a).attr("title",l||i),c},createOptionValue:function(e,i){var o=t(e);o.is(":selected")&&o.prop("selected",1);var s=this.options.optionLabel(e),l=this.options.optionClass(e),n=o.val(),p=this.options.multiple?"checkbox":"radio",a=o.attr("title"),r=t(this.options.templates.option);r.addClass(l),i&&this.options.indentGroupOptions&&(this.options.enableCollapsibleOptGroups?r.addClass("multiselect-group-option-indented-full"):r.addClass("multiselect-group-option-indented")),this.options.collapseOptGroupsByDefault&&"optgroup"===t(e).parent().prop("tagName").toLowerCase()&&(r.addClass("multiselect-collapsible-hidden"),r.hide());var c=this.options.checkboxName(o),d=this.createAndApplyUniqueId(o),u=this.createCheckbox(r,s,c,n,a,p,d),h=o.prop("selected")||!1;n===this.options.selectAllValue&&(r.addClass("multiselect-all"),r.removeClass("multiselect-option"),u.parent().parent().addClass("multiselect-all")),this.$popupContainer.append(r),o.is(":disabled")&&u.attr("disabled","disabled").prop("disabled",!0).closest(".dropdown-item").addClass("disabled"),u.prop("checked",h),h&&this.options.selectedClass&&u.closest(".dropdown-item").addClass(this.options.selectedClass)},createDivider:function(e){var i=t(this.options.templates.divider);this.$popupContainer.append(i)},createOptgroup:function(e){var i=t(e),o=i.attr("label"),s=i.attr("value"),l=i.attr("title"),n=t("<span class='multiselect-group dropdown-item-text'></span>");if(this.options.enableClickableOptGroups&&this.options.multiple){n=t(this.options.templates.optionGroup);var p=this.createAndApplyUniqueId(i);this.createCheckbox(n,o,null,s,l,"checkbox",p)}else n[this.options.enableHTML?"html":"text"](" "+o);var a=this.options.optionClass(e);n.addClass(a),this.options.enableCollapsibleOptGroups&&(n.find(".form-check").addClass("d-inline-block"),n.get(0).insertAdjacentHTML("afterbegin",'<span class="caret-container dropdown-toggle"></span>')),i.is(":disabled")&&n.addClass("disabled"),this.$popupContainer.append(n),t("option",e).each(t.proxy((function(t,e){this.createOptionValue(e,!0)}),this))},buildReset:function(){if(this.options.includeResetOption){if(this.options.includeResetDivider){var e=t(this.options.templates.divider);e.addClass("mt-0"),this.$popupContainer.prepend(e)}var i=t(this.options.templates.resetButton);t("button",i)[this.options.enableHTML?"html":"text"](this.options.resetText).on("click",t.proxy((function(){this.clearSelection()}),this)),this.$popupContainer.prepend(i)}},buildSelectAll:function(){if("number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString()),!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&t("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$popupContainer.prepend(t(this.options.templates.divider));var e=t(this.options.templates.li||this.options.templates.option),i=this.createCheckbox(e,this.options.selectAllText,this.options.selectAllName,this.options.selectAllValue,this.options.selectAllText,"checkbox",this.createAndApplyUniqueId(null));e.addClass("multiselect-all"),e.removeClass("multiselect-option"),e.find(".form-check-label").addClass("font-weight-bold"),this.$popupContainer.prepend(e),i.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var e=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);this.$select.find("option").length>=e&&(this.$filter=t(this.options.templates.filter),t("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn?(this.isFirefox()&&0===this.$filter.find(".multiselect-clear-filter").length&&this.$filter.append("<i class='fas fa-times text-muted multiselect-clear-filter multiselect-moz-clear-filter'></i>"),this.$filter.find(".multiselect-clear-filter").on("click",t.proxy((function(e){clearTimeout(this.searchTimeout),this.query="",this.$filter.find(".multiselect-search").val(""),t(".dropdown-item",this.$popupContainer).show().removeClass("multiselect-filter-hidden"),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()}),this))):(this.$filter.find(".multiselect-search").attr("type","text"),this.$filter.find(".multiselect-clear-filter").remove()),this.$popupContainer.prepend(this.$filter),this.$filter.val(this.query).on("click",(function(t){t.stopPropagation()})).on("input keydown",t.proxy((function(e){13===e.which&&e.preventDefault(),this.isFirefox()&&this.options.includeFilterClearBtn&&this.$filter.find(".multiselect-moz-clear-filter")[e.target.value?"show":"hide"](),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(t.proxy((function(){var i,o;this.query!==e.target.value&&(this.query=e.target.value,t.each(t(".multiselect-option, .multiselect-group",this.$popupContainer),t.proxy((function(e,s){var l=t("input",s).length>0?t("input",s).val():"",n=t(".form-check-label",s).text(),p="";if("text"===this.options.filterBehavior?p=n:"value"===this.options.filterBehavior?p=l:"both"===this.options.filterBehavior&&(p=n+"\n"+l),l!==this.options.selectAllValue&&n){var a=!1;if(this.options.enableCaseInsensitiveFiltering&&(p=p.toLowerCase(),this.query=this.query.toLowerCase()),this.options.enableFullValueFiltering&&"both"!==this.options.filterBehavior){var r=p.trim().substring(0,this.query.length);this.query.indexOf(r)>-1&&(a=!0)}else p.indexOf(this.query)>-1&&(a=!0);a||(t(s).css("display","none"),t(s).addClass("multiselect-filter-hidden")),a&&(t(s).css("display","block"),t(s).removeClass("multiselect-filter-hidden")),t(s).hasClass("multiselect-group")?(i=s,o=a):(a&&t(i).show().removeClass("multiselect-filter-hidden"),!a&&o&&t(s).show().removeClass("multiselect-filter-hidden"))}}),this)));this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.updatePopupPosition(),this.options.onFiltering(e.target)}),this),300,this)}),this)))}},buildButtons:function(){if(this.options.enableResetButton){var e=t(this.options.templates.buttonGroup);this.$buttonGroupReset=t(this.options.templates.buttonGroupReset).text(this.options.resetButtonText),e.append(this.$buttonGroupReset),this.$popupContainer.prepend(e),this.defaultSelection={},t("option",this.$select).each(t.proxy((function(e,i){var o=t(i);this.defaultSelection[o.val()]=o.prop("selected")}),this)),this.$buttonGroupReset.on("click",t.proxy((function(e){t("option",this.$select).each(t.proxy((function(e,i){var o=t(i);o.prop("selected",this.defaultSelection[o.val()])}),this)),this.refresh(),this.options.enableFiltering&&(this.$filter.trigger("keydown"),t("input",this.$filter).val(""))}),this))}},updatePopupPosition:function(){var t=this.$popupContainer.css("transform"),e=t.substring(0,t.indexOf("(")),i=t.substring(t.indexOf("(")+1,t.length-1).split(","),o=5;if("matrix3d"===e&&(o=13),!(i.length<o)){var s=i[o];(s=void 0===s?0:s.trim())<0&&(s=-1*this.$popupContainer.css("height").replace("px",""),i[o]=s,t=e+"("+i.join(",")+")",this.$popupContainer.css("transform",t))}},destroy:function(){this.$container.remove(),this.$select.unwrap(),this.$select.show(),this.$select.prop("disabled",this.options.wasDisabled),this.$select.find("option, optgroup").removeAttr("data-multiselectid"),this.$select.data("multiselect",null)},refresh:function(){var e={};t(".multiselect-option input",this.$popupContainer).each((function(){e[t(this).val()]=t(this)})),t("option",this.$select).each(t.proxy((function(i,o){var s=t(o),l=e[t(o).val()];s.is(":selected")?(l.prop("checked",!0),this.options.selectedClass&&l.closest(".multiselect-option").addClass(this.options.selectedClass)):(l.prop("checked",!1),this.options.selectedClass&&l.closest(".multiselect-option").removeClass(this.options.selectedClass)),s.is(":disabled")?l.attr("disabled","disabled").prop("disabled",!0).closest(".multiselect-option").addClass("disabled"):l.prop("disabled",!1).closest(".multiselect-option").removeClass("disabled")}),this)),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},select:function(e,i){t.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){var s=e[o];if(null!=s){var l=this.getInputsByValue(s);if(l&&0!==l.length)for(var n=0;n<l.length;++n){var p=l[n],a=this.getOptionById(p.attr("id"));if(void 0!==a){if(this.options.selectedClass&&p.closest(".dropdown-item").addClass(this.options.selectedClass),p.prop("checked",!0),a.prop("selected",!0),!this.options.multiple){var r=t("input",this.$container).not(p);t(r).prop("checked",!1),t(r).closest(".multiselect-option").removeClass("active"),t("option",this.$select).not(a).prop("selected",!1)}i&&this.options.onChange(a,!0)}}}}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},deselect:function(e,i){if(this.options.multiple){t.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++){var s=e[o];if(null!=s){var l=this.getInputsByValue(s);if(l&&0!==l.length)for(var n=0;n<l.length;++n){var p=l[n],a=this.getOptionById(p.attr("id"));a&&(this.options.selectedClass&&p.closest(".dropdown-item").removeClass(this.options.selectedClass),p.prop("checked",!1),a.prop("selected",!1),i&&this.options.onChange(a,!1))}}}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()}},selectAll:function(e,i){if(this.options.multiple){var o=[];if(e=void 0===e||e){var s=t(".multiselect-option:not(.disabled):not(.multiselect-filter-hidden)",this.$popupContainer);t("input:enabled",s).prop("checked",!0),s.addClass(this.options.selectedClass),t("input:enabled",s).each(t.proxy((function(e,i){var s=t(i).attr("id"),l=this.getOptionById(s);t(l).prop("selected")||o.push(l),t(l).prop("selected",!0)}),this))}else{var l=t(".multiselect-option:not(.disabled)",this.$popupContainer);t("input:enabled",l).prop("checked",!0),l.addClass(this.options.selectedClass),t("input:enabled",l).each(t.proxy((function(e,i){var s=t(i).attr("id"),l=this.getOptionById(s);t(l).prop("selected")||o.push(l),t(l).prop("selected",!0)}),this))}t('.multiselect-option input[value="'+this.options.selectAllValue+'"]',this.$popupContainer).prop("checked",!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.updateButtonText(),this.updateSelectAll(),i&&this.options.onSelectAll(o)}},deselectAll:function(e,i){if(this.options.multiple){var o=[];if(e=void 0===e||e){var s=t(".multiselect-option:not(.disabled):not(.multiselect-filter-hidden)",this.$popupContainer);t('input[type="checkbox"]:enabled',s).prop("checked",!1),s.removeClass(this.options.selectedClass),t('input[type="checkbox"]:enabled',s).each(t.proxy((function(e,i){var s=t(i).attr("id"),l=this.getOptionById(s);t(l).prop("selected")&&o.push(l),t(l).prop("selected",!1)}),this))}else{var l=t(".multiselect-option:not(.disabled):not(.multiselect-group)",this.$popupContainer);t('input[type="checkbox"]:enabled',l).prop("checked",!1),l.removeClass(this.options.selectedClass),t('input[type="checkbox"]:enabled',l).each(t.proxy((function(e,i){var s=t(i).attr("id"),l=this.getOptionById(s);t(l).prop("selected")&&o.push(l),t(l).prop("selected",!1)}),this))}t('.multiselect-all input[value="'+this.options.selectAllValue+'"]',this.$popupContainer).prop("checked",!1),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.updateButtonText(),this.updateSelectAll(),i&&this.options.onDeselectAll(o)}},rebuild:function(){this.internalIdCount=0,this.$popupContainer.html(""),this.$select.find("option, optgroup").removeAttr("data-multiselectid"),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.buildButtons(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.disableIfEmpty&&(t("option",this.$select).length<=0?this.$select.prop("disabled")||this.disable(!0):this.$select.data("disabled-by-option")&&this.enable()),this.options.dropRight?this.$container.addClass("dropright"):this.options.dropUp&&this.$container.addClass("dropup"),"never"!==this.options.widthSynchronizationMode&&this.synchronizeButtonAndPopupWidth()},dataprovider:function(e){var i=0,o=this.$select.empty();t.each(e,(function(e,s){var l;if(t.isArray(s.children))i++,l=t("<optgroup/>").attr({label:s.label||"Group "+i,disabled:!!s.disabled,value:s.value}),function(t,e){for(var i=0;i<t.length;++i)e(t[i],i)}(s.children,(function(e){var i={value:e.value,label:void 0!==e.label&&null!==e.label?e.label:e.value,title:e.title,class:e.class,selected:!!e.selected,disabled:!!e.disabled};for(var o in e.attributes)i["data-"+o]=e.attributes[o];l.append(t("<option/>").attr(i))}));else{var n={value:s.value,label:void 0!==s.label&&null!==s.label?s.label:s.value,title:s.title,class:s.class,selected:!!s.selected,disabled:!!s.disabled};for(var p in s.attributes)n["data-"+p]=s.attributes[p];(l=t("<option/>").attr(n)).text(void 0!==s.label&&null!==s.label?s.label:s.value)}o.append(l)})),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled"),this.updateButtonText()},disable:function(t){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled"),t?this.$select.data("disabled-by-option",!0):this.$select.data("disabled-by-option",null),this.updateButtonText()},setOptions:function(t){this.options=this.mergeOptions(t)},mergeOptions:function(e){return t.extend(!0,{},this.defaults,this.options,e)},hasSelectAll:function(){return t(".multiselect-all",this.$popupContainer).length>0},updateOptGroups:function(){var e=t(".multiselect-group",this.$popupContainer),i=this.options.selectedClass;e.each((function(){var e=t(this).nextUntil(".multiselect-group").not(".multiselect-filter-hidden").not(".disabled"),o=!0;e.each((function(){t("input",this).prop("checked")||(o=!1)})),i&&(o?t(this).addClass(i):t(this).removeClass(i)),t("input",this).prop("checked",o)}))},updateSelectAll:function(e){if(this.hasSelectAll()){var i=t(".multiselect-option:not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled",this.$popupContainer),o=i.length,s=i.filter(":checked").length,l=t(".multiselect-all",this.$popupContainer),n=l.find("input");s>0&&s===o?(n.prop("checked",!0),l.addClass(this.options.selectedClass)):(n.prop("checked",!1),l.removeClass(this.options.selectedClass))}},updateButtonText:function(){var e=this.getSelected();this.options.enableHTML?t(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(e,this.$select)):t(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(e,this.$select)),t(".multiselect",this.$container).attr("title",this.options.buttonTitle(e,this.$select)),this.$button.trigger("change")},getSelected:function(){return t("option",this.$select).filter(":selected")},getOptionById:function(t){return t?this.$select.find("option[data-multiselectid="+t+"], optgroup[data-multiselectid="+t+"]"):null},getInputsByValue:function(e){for(var i=t(".multiselect-option input:not(.multiselect-search)",this.$popupContainer),o=e.toString(),s=[],l=0;l<i.length;l+=1){var n=i[l];n.value===o&&s.push(t(n))}return s},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(t,e,i){var o=Array.prototype.slice.call(arguments,3);return setTimeout((function(){t.apply(i||window,o)}),e)},setAllSelectedText:function(t){this.options.allSelectedText=t,this.updateButtonText()},isFirefox:function(){return!(!navigator||!navigator.userAgent)&&navigator.userAgent.toLocaleLowerCase().indexOf("firefox")>-1},createAndApplyUniqueId:function(t){var e="multiselect_"+this.multiselectId+"_"+this.internalIdCount++;return t&&(t[0].dataset.multiselectid=e),e},generateUniqueId:function(){return Math.random().toString(36).substr(2)}},t.fn.multiselect=function(e,o,s){return this.each((function(){var l=t(this).data("multiselect");l||(l=new i(this,"object"==typeof e&&e)),"string"==typeof e&&l[e](o,s)}))},t.fn.multiselect.Constructor=i,t((function(){t("select[data-role=multiselect]").multiselect()}))}));